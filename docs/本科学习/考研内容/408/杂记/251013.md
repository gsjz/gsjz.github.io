# 251013

??? info "五段基本流水线"

    | 阶段名（中文）   | 英文缩写                                        | 主要工作                     | 发生时间  |
    | --------- | ------------------------------------------- | ------------------------ | ----- |
    | 取指令       | **IF** (Instruction Fetch)                  | 从内存中取出下一条指令              | 周期 t1 |
    | 指令译码/寄存器读 | **ID** (Instruction Decode / Register Read) | 解析指令，读取寄存器的操作数           | t2    |
    | 执行 / 地址计算 | **EX** (Execute)                            | 进行运算（比如加法）、计算内存地址        | t3    |
    | 访存        | **MEM** (Memory Access)                     | 如果需要访问内存（比如 lw/sw），就在这一步 | t4    |
    | 写回寄存器     | **WB** (Write Back)                         | 把运算结果写回寄存器（如 R1）         | t5    |


???+ question

    在无转发机制的五段基本流水线中，下列指令序列存在数据冒险的指令对是（ ）。

    I1: add R1, R2, R3; (R2)+(R3)→R1

    I2: add R5, R2, R4; (R2)+(R4)→R5

    I3: add R4, R5, R3; (R5)+(R3)→R4

    I4: add R5, R2, R6; (R2)+(R6)→R5

    A. I1 和 I2

    B. I2 和 I3

    C. I2 和 I4

    D. I3 和 I4

??? success
    
    B

    首先指令编号越大，执行得相对越晚。

    其次流水线实际上形如

    | 周期 | I1  | I2  | I3  | I4  |
    | -- | --- | --- | --- | --- |
    | 1  | IF  |     |     |     |
    | 2  | ID  | IF  |     |     |
    | 3  | EX  | ID  | IF  |     |
    | 4  | MEM | EX  | ID  | IF  |
    | 5  | WB  | MEM | EX  | ID  |
    | 6  |     | WB  | MEM | EX  |
    | 7  |     |     | WB  | MEM |
    | 8  |     |     |     | WB  |

    就是像字面上的流水线，五个工人轮流做。

    数据冒险即，同一个周期内，一个工人正准备修改当前这个数据，另一个工人又想拿来用。即同时出现 MEM 和 WB。

    即 $I_{i-1}$ 在写，$I_{i}$ 在读。


???+ question

    TCP的协议数据单元被称为（ ）。

    A、比特　　B、帧　　C、分段　　D、字符

??? success
    
    C

???+ question

    下列关于操作系统结构的说法中，正确的时（）。

    Ⅰ、当前广泛使用的Windows XP操作系统，采用的是分层式OS结构

    Ⅱ、模块化的OS结构设计的基本原则是，每一层都仅使用其底层所提供的功能和服务，这样就使系统的调试和验证都变得容易

    Ⅲ、由于微内核结构能有效支持多处理机运行，故非常适合于分布式系统环境

    Ⅳ、采用微内核结构设计和实现操作系统具有诸多好处，如添加系统服务时，不必修改内核、使系统更高效。

    A、Ⅰ和Ⅱ
    B、Ⅰ和Ⅲ
    C、Ⅲ
    D、Ⅲ和Ⅳ

??? success

    答案：C

    Windows是宏内核操作系统，Ⅰ错误。

    Ⅱ描述的是层次化构架的原则。

    在微内核构架中，客户和服务器之间、服务器和服务器之间的通信采用消息传递机制，这就使得微内核系统能很好地支持分布式系统，Ⅲ正确。

    添加系统服务时不必修改内核，这就使得微内核构架的可扩展性和灵活性更强；微内核构架的主要问题是性能问题，“使系统更高效”显然错误，恰恰相反。


???+ question
    
    在调试程序时，可以把所有输出送到屏幕显示，而不必正式输出到打印设备，其运用了（  ）.

    A.Spooling技术    B.I/O重定向     C.共享技术        D.缓冲技术

??? success

    B.I/O重定向


???+ question

    单周期处理器中所有指令的指令周期为一个时钟周期。下列关干单周期处理器的叙述中，错误的是（ ）。

    A. 可以采用单总线结构数据通路

    B. 处理器时钟频率较低

    C. 在指令执行过程中控制信号不变

    D. 每条指令的CPI为1

??? success

    本题考察对CPU时钟周期的理解。

    时钟周期：又称节拍周期，是处理操作的最基本单位。时钟周期是计算机中最基本的、最小的时间单位。在一个时钟周期内，CPU仅完成一个最基本的动作。时钟周期是一个时间的量。

    单总线结构将CPU、主存、I/O设备都挂在一组总线上，允许I/O设备之间、I/O设备与主存之间直接交换信息，但多个部件只能争用唯一的总线，且不支持并发传送操作，会造成总线冲突。单周期处理器不可以采用单总线结构数据通路。A错误。
    
    
    假设一条指令分为五段①IF取值②ID译码和取数③EX执行④M访存⑤WB，每段执行需要一个时钟周期，若要在一个时钟周期内完成该指令，则需要5条总线并行，单总线显然无法满足要求，若要在单总线上完成，则需要串行执行5个时钟周期。单周期处理器采用单总线结构数据通路，好比上班高峰交通要道限速又限流，直接造成交通堵塞。

    因为要考虑比较慢的指令，所以处理器的时钟频率较低，B正确。

    因为在一个时钟周通常为一个节拍脉冲，控制信号时控制单元 (CU) 根据指令操作码发出的信号，一个时钟周期内的控制信号不变，单周期处理器中所有指令的指令周期为一个时钟周期，在指令执行过程中控制信号不变。C正确。

    因为单周期处理器即指所有指令的指令周期为一个时钟周期，所以每条指令的CPI为1。D正确。

    本题选A。

??? info "CPI"

    | 项目           | 含义               |
    | ------------ | ---------------- |
    | CPI          | 每条指令平均花的周期数      |
    | 单周期处理器       | CPI 固定为 1        |
    | 多周期 / 流水线处理器 | CPI 可能大于 1（甚至浮动） |
    | 计算公式         | CPI = 总周期数 ÷ 指令数 |
    | 性能影响因素       | CPI 越小，性能越好      |

