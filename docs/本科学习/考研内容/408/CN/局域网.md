Local Area Network，缩写 LAN。


## 局域网拓扑实现

常见的四类：星形，环形，总线，星形和总线形。

- 以太网，目前使用范围最广，逻辑拓扑是总线形，物理拓扑是星形。

- 令牌环 Token Ring, IEEE 802.5，逻辑拓扑是环形，物理拓扑是星形。

- FDDI，光纤分布数字接口，IEEE 802.8，逻辑拓扑是环形，物理拓扑是双环。

## IEEE 802 协议层

OSI 参考模型，就是那七个 XX 层。

IEEE 802，只对应了 OSI 最底下两个：数据链路层 和 物理层。

其中 数据链路层 被细分为 LLC（逻辑链路控制）和 MAC（介质访问控制）。

## 以太网的 MAC 地址

MAC 地址长六字节，由 12 个十六进制数表示。

高 24 位为厂商代码，低 24 位为厂商自行分配的适配器序列号。

## ARP 缓存表

Address Resolution Protocol。

### 工作原理

广播请求：

主机 A 知道目标 IP，但不知道目标 MAC。

A 会在局域网里广播一个 ARP Request：

“谁的 IP 地址是 192.168.1.5？请告诉我你的 MAC 地址。”

单播应答：

拥有该 IP 的主机 B 收到请求后，回复一个 ARP Reply：

“192.168.1.5 的 MAC 是 00-1A-2B-3C-4D-5E。”

缓存结果：

主机 A 把这个映射关系保存到本机的 ARP 缓存表（ARP Table），下次就不用再广播了，直接用。

### TTL

time to live。就是说过期的时间，毕竟缓存有时候不太可信，时间长了要重新确认。

## CSMA/CD vs. CSMA/CA

| 特性   | CSMA/CD（以太网）    | CSMA/CA（Wi-Fi） |
| ---- | --------------- | -------------- |
| 检测   | 允许碰撞，事后检测       | 避免碰撞，事前预防      |
| 技术条件 | 有线、可边发边听        | 无线、不能边发边听      |
| 方式   | 碰撞后 Jam 信号 + 退避 | 随机退避 + RTS/CTS |
| 使用   | 早期半双工以太网        | 无线局域网 (802.11) |

半双工 (Half-duplex)：像对讲机，一方说话时另一方只能听，不能同时说话。

全双工 (Full-duplex)：像电话，双方可以同时说话和听。

公共前缀是 Carrier Sense Multiple Access with Collision 

不同之处，一个 Detection，另一个 Avoidance。

??? question "用集线器链接的共享式以太网"
    
    实际上以太网也有分类。涉及 CSMA/CD 的，严谨地话就得交代是用集线器（Hub）的以太网。

    Hub 是一种 物理层设备（工作在 OSI 模型第 1 层）。它收到某台主机发来的信号时，会把这个信号 原封不动地广播到所有端口。也就是说，所有连在 Hub 上的主机都能“听到”这个信号。
    
    因为所有设备共用一条总线（逻辑上），只有一台主机可以在某个时刻发数据。共享带宽，冲突域大，只能半双工。

    对应地，对比现代以太网（交换机）：
    
    交换机 (Switch) 是数据链路层设备（第 2 层），会根据 MAC 地址 转发数据。

    每个端口是独立的冲突域，支持 全双工通信。不再需要 CSMA/CD，效率比集线器高得多。




## 传输介质

在以太网的发展中，不同阶段用过不同的传输介质：

10BASE-5：粗同轴电缆

10BASE-2：细同轴电缆

10BASE-T：双绞线（Twisted Pair）

100BASE-TX / 1000BASE-T / 10GBASE-T：双绞线（Cat5e/Cat6 等）

10BASE-F / 100BASE-FX / 1000BASE-LX：光纤

总结来说：T 系列是双绞线 twisted，F 是光纤 fibre，

