<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>D3 二叉树示例</title>
  <script src="js/d3.v7.min.js"></script>
</head>
<body>
  <svg width="600" height="400"></svg>
  <script>

    const treeData = {
    name: "A",
    children: [
        { name: "B",
        children: [
            {name: "D"},
            {name: "E"}
        ]
        },
        { name: "C",
        children: [
            {name: "F"},
            {name: "G"}
        ]
        }
    ]
    };

    const svg = d3.select("svg"),
          width = +svg.attr("width"),
          height = +svg.attr("height");

    const root = d3.hierarchy(treeData);
    const treeLayout = d3.tree().size([width - 100, height - 100]);
    treeLayout(root);

    // 绘制连线
    svg.selectAll('path.link')
      .data(root.links())
      .join('path')
        .attr('class', 'link')
        .attr('d', d3.linkVertical()
          .x(d => d.x + 50)
          .y(d => d.y + 50))
        .attr('fill', 'none')
        .attr('stroke', '#666');

    // 绘制节点
    const node = svg.selectAll('g.node')
      .data(root.descendants())
      .join('g')
        .attr('transform', d => `translate(${d.x + 50},${d.y + 50})`);

    node.append('circle')
        .attr('r', 20)
        .attr('fill', '#fff')
        .attr('stroke', 'steelblue')
        .attr('stroke-width', 2);

    node.append('text')
        .attr('dy', '0.35em')
        .attr('y', d => d.children ? -30 : 30)
        .attr('text-anchor', 'middle')
        .text(d => d.data.name);
  </script>
</body>
</html>
