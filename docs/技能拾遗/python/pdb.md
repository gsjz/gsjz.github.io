# pdb

之前写 `cpp` 的时候从来没用过调试工具而是打印或者 `assert` 等。

这次来随便学一下。

## 设置断点

一种是版本大于 `3.7` 的 python 原生的，可以直接往代码里写

```python
breakpoint()
```

还有一种是 ide 内部提供的，这个通过鼠标点击行号或者行号左侧设置。

此外，也可以直接在使用命令行编译的时候使用如下命令

```bash
python -m pdb test.py
```

来逐行运行程序，或者停在程序错误处。

## 命令行速查表

### 执行控制

| 命令         | 简写  | 作用          |
| ---------- | --- | ----------- |
| `next`     | `n` | 执行下一行（不进函数） |
| `step`     | `s` | 进入函数内部      |
| `continue` | `c` | 一直跑到下一个断点   |
| `return`   | `r` | 跑到当前函数返回    |
| `quit`     | `q` | 退出程序        |


### 代码查看

| 命令           | 简写  | 作用        |
| ------------ | --- | --------- |
| `list`       | `l` | 查看当前代码    |
| `list 10`    |     | 从第 10 行开始 |
| `list 10,20` |     | 查看指定行区间   |
| `where`      | `w` | 显示调用栈     |
| `up`         |     | 向上切换栈帧    |
| `down`       |     | 向下切换栈帧    |

### 变量与表达式查看

| 命令          | 简写    | 说明                  |
| ----------- | ----- | ------------------- |
| `print x`   | `p x` | 打印变量                |
| `pp x`      |       | 漂亮打印（容器友好）          |
| `locals()`  |       | 当前局部变量              |
| `globals()` |       | 全局变量                |
| 直接写表达式      |       | `x.shape`, `len(x)` |


### 断点管理

| 命令                  | 作用        |
| ------------------- | --------- |
| `break`             | 查看所有断点    |
| `break file.py:23`  | 在指定行设断点   |
| `break func_name`   | 在函数入口设断点  |
| `condition 1 x > 0` | 给断点 1 加条件 |
| `disable 1`         | 禁用断点      |
| `enable 1`          | 启用断点      |
| `clear 1`           | 删除断点      |


### 流程控制

| 命令         | 作用       |
| ---------- | -------- |
| `jump 50`  | 跳到某一行执行  |
| `until 80` | 跑到指定行    |
| `args`     | 查看当前函数参数 |


