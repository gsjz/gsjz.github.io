# 命令行

## 前言

我之前主要用 VSCode 的 GUI，大概搞懂了 git 的流程，基本也能满足需求。

然而最近出现了这样一个场景

???+ info "GUI 的模糊性"

    我希望手工把一次性修改的这些文件分成不同的 commit。

    于是我在 VSCode 的 GUI 里找到了暂存修改这个操作。

    由于我平时不用暂存也能 commit，所以认为暂存的就是现在还不想要 commit 的。

    于是成功搞反了文件和对应的 commit description！！

    我在 GUI 里找半天不知道怎么回退 commit，于是干脆就用命令行来实现了。


不同于一般教程的线性叙事（从怎么连接库开始，到怎么 push 结束），这里我们从中间往两边扩展，从解决这个场景开始，逐步延申出一些命令行的使用操作。

## 回退！

假设我们阴差阳错地用 GUI 做了这样一个操作

```sh

git add filename1

git commit -m "description2"

```

其实还有的救

```sh

git reset HEAD~1

```

这里的神秘数字 1 代表回到当前状态的上 1 个状态。同理如果前面犯了 2 个蠢，就可以用 `HEAD~2` 一次性跳到上 2 个状态。

## 看看问题解决了没有？

从 CLI 到 GUI，通常会带来一些生产力进步。

在刚刚那个过程中，VSCode 的图形界面也会同步更新，方便我们观察状态。

那在没有这个图形界面之前，我们需要怎么观察当前 git 的状态呢？

```sh

git status

```

## 先看看，别急着改

我们发散地想一下，还有什么指令是查看某些状态的。

毕竟只是看看，不修改，也不会带来啥后效性。

```sh

git remote -v

```

可以看到 (fetch) 和 (push) 的源。

```sh

git branch -vv

```

可以看到当前分支。


## 暂存大部分文件但不是全部

如果我希望暂存大部分文件，其实可以先 add 全部文件，然后手动 restore 一些文件。

```sh

git add .

git restore --staged filename

```

## 对于未 tracked 的文件

用

```sh
git clean -fd
```


## 怎么 push 到远程

如果已经连接好了，就直接

```sh
git push
```

首次 push 的时候指定分支

```sh
git push -u origin main
```

## 连接到远程库

```sh
git remote add origin https://github.com/USERNAME/REPO.git
```


